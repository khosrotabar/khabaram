import Image from "next/image";
import styles from "./CurrentOrders.module.css";

function CurrentOrders(props) {
  const purchases = props.purchases;
  const active = props.active;

  const dateSvg = (
    <svg
      width="18"
      height="23"
      viewBox="0 0 18 23"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M5.15901 1.15901C5.58097 0.737053 6.15326 0.5 6.75 0.5H11.25C11.8467 0.5 12.419 0.737053 12.841 1.15901C13.2629 1.58097 13.5 2.15326 13.5 2.75V3.875C13.5 4.47174 13.2629 5.04403 12.841 5.46599C12.419 5.88795 11.8467 6.125 11.25 6.125H6.75C6.15326 6.125 5.58097 5.88795 5.15901 5.46599C4.73705 5.04403 4.5 4.47174 4.5 3.875V2.75C4.5 2.15326 4.73705 1.58097 5.15901 1.15901ZM11.25 2.75H6.75L6.75 3.875H11.25V2.75ZM4.5 10.625C4.5 10.0037 5.00368 9.5 5.625 9.5H12.375C12.9963 9.5 13.5 10.0037 13.5 10.625C13.5 11.2463 12.9963 11.75 12.375 11.75H5.625C5.00368 11.75 4.5 11.2463 4.5 10.625ZM4.5 15.125C4.5 14.5037 5.00368 14 5.625 14H12.375C12.9963 14 13.5 14.5037 13.5 15.125C13.5 15.7463 12.9963 16.25 12.375 16.25H5.625C5.00368 16.25 4.5 15.7463 4.5 15.125Z"
        fill="#4B416A"
      />
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M0.65901 2.28401C1.08097 1.86205 1.65326 1.625 2.25 1.625C2.87132 1.625 3.375 2.12868 3.375 2.75C3.375 3.37132 2.87132 3.875 2.25 3.875L2.25 20.75H15.75L15.75 3.875C15.1287 3.875 14.625 3.37132 14.625 2.75C14.625 2.12868 15.1287 1.625 15.75 1.625C16.3467 1.625 16.919 1.86205 17.341 2.28401C17.7629 2.70597 18 3.27826 18 3.875V20.75C18 21.3467 17.763 21.919 17.341 22.341C16.919 22.763 16.3467 23 15.75 23H2.25C1.65326 23 1.08097 22.7629 0.65901 22.341C0.237053 21.919 0 21.3467 0 20.75V3.875C0 3.27826 0.237054 2.70597 0.65901 2.28401Z"
        fill="#4B416A"
      />
    </svg>
  );
  const walletSvg = (
    <svg
      width="24"
      height="23"
      viewBox="0 0 24 23"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M16.2266 14.9501C16.2266 13.9974 16.9989 13.2251 17.9516 13.2251H18.0666C19.0193 13.2251 19.7916 13.9974 19.7916 14.9501C19.7916 15.9028 19.0193 16.6751 18.0666 16.6751H17.9516C16.9989 16.6751 16.2266 15.9028 16.2266 14.9501Z"
        fill="#4B416A"
      />
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M13.722 0.489563C14.0866 -0.0300856 14.8033 -0.156001 15.3232 0.208252L20.9697 4.16425C21.4896 4.52845 21.616 5.24492 21.2523 5.76508L19.1938 8.70908C18.9787 9.0168 18.6268 9.2001 18.2514 9.2001H4.07188C3.64284 9.2001 3.24948 8.96127 3.05156 8.58061C2.85363 8.19995 2.88407 7.74077 3.1305 7.38956L7.972 0.489563C8.33677 -0.0303029 9.05389 -0.156071 9.5738 0.208642L12.4858 2.25138L13.722 0.489563ZM11.1641 4.13368L9.1943 2.7519L6.28365 6.9001H9.22379L11.1641 4.13368ZM12.0336 6.9001L14.9447 2.75134L18.709 5.38869L17.6522 6.9001H12.0336Z"
        fill="#4B416A"
      />
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M0.759766 9.2001C0.759766 7.92985 1.78951 6.9001 3.05977 6.9001H21.4598C22.73 6.9001 23.7598 7.92985 23.7598 9.2001V20.7001C23.7598 21.9704 22.73 23.0001 21.4598 23.0001H3.05977C1.78951 23.0001 0.759766 21.9704 0.759766 20.7001V9.2001ZM21.4598 9.2001H3.05977V20.7001H21.4598V9.2001Z"
        fill="#4B416A"
      />
    </svg>
  );
  const priceUnitSvg = (
    <svg
      width="19"
      height="18"
      viewBox="0 0 19 18"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M9.92401 16.2756C10.2005 16.2756 10.4458 16.2652 10.6601 16.2443C10.8778 16.227 11.0696 16.1992 11.2355 16.161C11.4048 16.1263 11.5517 16.0794 11.6761 16.0204C11.804 15.9649 11.9145 15.8972 12.0078 15.8174C12.153 15.6993 12.2618 15.5622 12.3344 15.406C12.4104 15.2498 12.4554 15.0398 12.4692 14.776H11.6709C11.4981 14.776 11.3219 14.7621 11.1422 14.7343C10.9625 14.7065 10.7897 14.6597 10.6238 14.5937C10.4579 14.5243 10.3007 14.4358 10.1521 14.3282C10.007 14.2205 9.87909 14.0886 9.7685 13.9324C9.66138 13.7727 9.57498 13.5853 9.50932 13.3701C9.44712 13.1549 9.41602 12.9084 9.41602 12.6307C9.41602 12.3912 9.43675 12.1794 9.47822 11.9954C9.51969 11.808 9.57153 11.6431 9.63373 11.5008C9.69939 11.3584 9.77196 11.2352 9.85144 11.1311C9.93093 11.0235 10.007 10.9297 10.0795 10.8499C10.2869 10.6416 10.5219 10.4819 10.7845 10.3708C11.0471 10.2563 11.3305 10.199 11.6346 10.199C12.0113 10.199 12.3327 10.265 12.5988 10.3969C12.8683 10.5253 13.0878 10.7041 13.2571 10.9332C13.4299 11.1623 13.556 11.4348 13.6355 11.7507C13.715 12.0631 13.7547 12.4033 13.7547 12.7713V13.4794H14.636V14.776H13.7496C13.7357 15.2515 13.6511 15.6525 13.4956 15.9788C13.3435 16.3051 13.1154 16.5897 12.8113 16.8327C12.6523 16.9577 12.4796 17.0653 12.2929 17.1556C12.1063 17.2493 11.8973 17.3274 11.6657 17.3899C11.4342 17.4524 11.175 17.4975 10.8882 17.5252C10.6048 17.5565 10.2834 17.5721 9.92401 17.5721V16.2756ZM11.6346 11.4956C11.3409 11.4956 11.1076 11.5875 10.9348 11.7715C10.762 11.9555 10.6756 12.2419 10.6756 12.6307C10.6756 12.7834 10.705 12.9136 10.7638 13.0212C10.826 13.1288 10.9037 13.2173 10.997 13.2868C11.0938 13.3527 11.2009 13.4013 11.3184 13.4326C11.4359 13.4638 11.5534 13.4794 11.6709 13.4794H12.4692V12.7713C12.4692 12.5734 12.4536 12.405 12.4225 12.2662C12.3914 12.1239 12.35 12.0058 12.2981 11.9121C12.2498 11.8184 12.1927 11.7438 12.1271 11.6882C12.0649 11.6327 12.0027 11.591 11.9405 11.5632C11.8817 11.5355 11.8247 11.5181 11.7694 11.5112C11.7141 11.5008 11.6692 11.4956 11.6346 11.4956Z"
        fill="#4B416A"
      />
      <path
        d="M18.2334 10.4021C18.2403 10.4264 18.2542 10.4837 18.2749 10.5739C18.2991 10.6642 18.325 10.7753 18.3526 10.9072C18.3803 11.0356 18.4079 11.1797 18.4356 11.3393C18.4667 11.499 18.4943 11.6604 18.5185 11.8236C18.5462 11.9833 18.5669 12.1395 18.5807 12.2922C18.598 12.445 18.6066 12.5786 18.6066 12.6932C18.6066 13.0507 18.5479 13.3614 18.4304 13.6252C18.3129 13.8856 18.1591 14.1008 17.9691 14.2709C17.779 14.441 17.5647 14.5677 17.3263 14.651C17.0913 14.7343 16.8546 14.776 16.6161 14.776H14.382V13.4794H16.6524C16.6939 13.4794 16.7526 13.4742 16.8287 13.4638C16.9081 13.4499 16.9859 13.4169 17.0619 13.3649C17.1414 13.3128 17.2105 13.2347 17.2693 13.1305C17.328 13.0229 17.3574 12.8771 17.3574 12.6932C17.3574 12.6168 17.3505 12.5248 17.3366 12.4172C17.3263 12.3061 17.3107 12.1881 17.29 12.0631C17.2693 11.9381 17.2451 11.8114 17.2174 11.683C17.1932 11.5511 17.169 11.4279 17.1449 11.3133C17.1207 11.1953 17.0965 11.0894 17.0723 10.9957C17.0481 10.8985 17.0291 10.8239 17.0153 10.7718L18.2334 10.4021ZM17.7462 9.38672L16.8753 8.50154L17.7358 7.60593L18.6274 8.50154L17.7462 9.38672ZM15.5742 9.39193L14.7034 8.50674L15.5587 7.61114L16.4502 8.50674L15.5742 9.39193Z"
        fill="#4B416A"
      />
      <path
        d="M2.51926 14.776C2.13912 14.776 1.81255 14.7517 1.53955 14.7031C1.26654 14.658 1.03673 14.5903 0.85012 14.5C0.663509 14.4063 0.513182 14.2883 0.399142 14.146C0.288557 14.0036 0.203891 13.837 0.145142 13.6461C0.0863942 13.4552 0.0466529 13.2399 0.0259183 13.0004C0.00863943 12.7574 0 12.4901 0 12.1985V7.26752H1.29073V12.1985C1.29073 12.4762 1.29937 12.6984 1.31665 12.865C1.33738 13.0317 1.38749 13.1618 1.46698 13.2556C1.54991 13.3458 1.67259 13.4066 1.83502 13.4378C2.00089 13.4656 2.22897 13.4795 2.51926 13.4795V14.776Z"
        fill="#4B416A"
      />
      <path
        d="M6.15807 13.7919C6.18917 13.7919 6.23755 13.7867 6.30321 13.7763C6.37233 13.7624 6.44144 13.7242 6.51056 13.6617C6.57967 13.5992 6.64015 13.5038 6.69199 13.3753C6.74728 13.2434 6.77492 13.0594 6.77492 12.8234C6.77492 12.7331 6.75764 12.6186 6.72309 12.4797C6.69199 12.3374 6.63497 12.2003 6.55203 12.0684C6.47254 11.933 6.36369 11.8184 6.22546 11.7247C6.09068 11.6275 5.91962 11.5789 5.71227 11.5789C5.53257 11.5789 5.3857 11.6327 5.27166 11.7403C5.15762 11.8479 5.06086 11.9816 4.98138 12.1413C4.90535 12.3009 4.83969 12.4745 4.7844 12.662C4.73256 12.8459 4.67554 13.0143 4.61334 13.167C4.7412 13.2399 4.87598 13.3146 5.01766 13.3909C5.16281 13.4638 5.30449 13.5298 5.44272 13.5888C5.58095 13.6478 5.71055 13.6964 5.8315 13.7346C5.95591 13.7728 6.06476 13.7919 6.15807 13.7919ZM5.71227 10.2876C6.07513 10.2876 6.39133 10.3553 6.66088 10.4907C6.93389 10.626 7.15851 10.8083 7.33476 11.0374C7.51446 11.263 7.64751 11.5251 7.7339 11.8236C7.82375 12.1222 7.86868 12.4346 7.86868 12.7609C7.86868 13.1219 7.83757 13.4291 7.77537 13.6825C7.71317 13.9359 7.63023 14.146 7.52656 14.3126C7.42634 14.4792 7.31057 14.6094 7.17925 14.7031C7.05139 14.8003 6.92179 14.8715 6.79047 14.9166C6.66261 14.9652 6.5382 14.9947 6.41725 15.0051C6.2963 15.019 6.19263 15.0259 6.10623 15.0259C5.93344 15.0259 5.76929 15.0086 5.61378 14.9739C5.45827 14.9426 5.29931 14.8958 5.13689 14.8333C4.97792 14.7743 4.81204 14.7014 4.63926 14.6146C4.46647 14.5243 4.27813 14.4237 4.07424 14.3126C3.91873 14.4792 3.75112 14.599 3.57142 14.6719C3.39518 14.7413 3.18783 14.776 2.94938 14.776H2.31179L2.30142 13.4795H2.94938C3.02541 13.4795 3.09107 13.4569 3.14636 13.4118C3.20511 13.3666 3.25695 13.3042 3.30187 13.2243C3.35025 13.141 3.39345 13.0421 3.43146 12.9275C3.47293 12.8095 3.5144 12.6793 3.55587 12.537C3.62499 12.2871 3.70792 12.0302 3.80469 11.7664C3.90145 11.4991 4.02931 11.2561 4.18828 11.0374C4.3507 10.8187 4.55459 10.6399 4.79995 10.5011C5.04531 10.3587 5.34942 10.2876 5.71227 10.2876Z"
        fill="#4B416A"
      />
      <path
        d="M6.8469 7.75841C6.57044 7.75841 6.30435 7.72544 6.04862 7.65948C5.79289 7.59353 5.55099 7.4998 5.32291 7.3783C5.09828 7.25681 4.88921 7.10754 4.69569 6.9305C4.50562 6.75347 4.33974 6.55386 4.19805 6.3317C4.03218 6.06094 3.90431 5.75893 3.81446 5.42568C3.72461 5.09591 3.67969 4.75051 3.67969 4.38949C3.67969 4.16038 3.69351 3.93822 3.72116 3.723C3.7488 3.50778 3.792 3.28735 3.85075 3.06171C3.91295 2.83607 3.99244 2.60002 4.0892 2.35356C4.18941 2.1071 4.31037 1.83633 4.45205 1.54127L5.61838 2.09842C5.49397 2.35182 5.3903 2.5792 5.30736 2.78053C5.22442 2.98187 5.15703 3.17279 5.10519 3.3533C5.05336 3.53034 5.01534 3.70217 4.99115 3.86879C4.97042 4.03195 4.96005 4.20378 4.96005 4.38428C4.96005 4.62034 4.98943 4.84597 5.04817 5.06119C5.10692 5.27989 5.18813 5.47602 5.29181 5.64958C5.45768 5.89605 5.6754 6.09218 5.94495 6.23797C6.21795 6.38724 6.51861 6.46187 6.8469 6.46187H7.89919C8.2655 6.46187 8.5627 6.42369 8.79078 6.34732C9.02231 6.27095 9.20201 6.1616 9.32988 6.01928C9.45774 5.88043 9.54414 5.71207 9.58906 5.5142C9.63744 5.31634 9.66163 5.09764 9.66163 4.85812V1.35382H10.9524V4.85812C10.9524 5.82662 10.6966 6.55213 10.1852 7.03464C9.67718 7.51716 8.91519 7.75841 7.89919 7.75841H6.8469ZM6.74323 0.947671L7.67629 0L8.63008 0.958085L7.68666 1.90576L6.74323 0.947671Z"
        fill="#4B416A"
      />
    </svg>
  );
  const conditionAlertSvg = (
    <svg
      width="22"
      height="22"
      viewBox="0 0 22 22"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M9.29492 6.6C9.29492 5.68873 10.0337 4.95 10.9449 4.95H11.0549C11.9662 4.95 12.7049 5.68873 12.7049 6.6C12.7049 7.51127 11.9662 8.25 11.0549 8.25H10.9449C10.0337 8.25 9.29492 7.51127 9.29492 6.6Z"
        fill="#A698CF"
      />
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M11.0004 11C11.6079 11 12.1004 11.4925 12.1004 12.1V15.4C12.1004 16.0075 11.6079 16.5 11.0004 16.5C10.3929 16.5 9.90039 16.0075 9.90039 15.4V12.1C9.90039 11.4925 10.3929 11 11.0004 11Z"
        fill="#A698CF"
      />
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M0 2.2C0 0.984973 0.984973 0 2.2 0H19.8C21.015 0 22 0.984973 22 2.2V19.8C22 21.015 21.015 22 19.8 22H2.2C0.984973 22 0 21.015 0 19.8V2.2ZM19.8 2.2H2.2V19.8H19.8V2.2Z"
        fill="#A698CF"
      />
    </svg>
  );

  function numberWithCommas(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, "٬");
  }

  return purchases.length !== 0 ? (
    <div style={active ? undefined : { display: "none" }}>
      {purchases.map((purchase, index) => {
        return (
          <div key={index} className={styles.purchase_container}>
            <div className={styles.purchase_up}>
              <div className={styles.purchase_images}>
                {purchase.products.map((product, index) => {
                  return (
                    index < 3 && (
                      <div key={index}>
                        <Image
                          alt=""
                          width="60"
                          height="60"
                          src={product.src}
                        />
                      </div>
                    )
                  );
                })}
              </div>
              <div className={styles.purchase_date}>
                {dateSvg}
                <p>{purchase.date}</p>
              </div>
              <div className={styles.purchase_price}>
                {walletSvg}
                <p>مبلغ کل :</p>
                &nbsp;
                <p>{numberWithCommas(purchase.finalPrice)}</p>
                {priceUnitSvg}
              </div>
              <div className={styles.purchase_factor}>
                <p>مشاهده فاکتور</p>
              </div>
            </div>
            <div className={styles.purchase_down}>
              <div className={styles.purchase_condition}>
                <div className={styles.purchase_acception_container}>
                  <div
                    className={
                      purchase.condition === "NC" || purchase.condition === "C"
                        ? `${styles.purchase_acception} ${styles.active_condition}`
                        : styles.purchase_acception
                    }
                  >
                    <p>1</p>
                  </div>
                  {purchase.condition === "NC" ? (
                    <div style={{ textAlign: "center" }}>
                      منتظر
                      <br /> تایید
                    </div>
                  ) : purchase.condition === "C" ? (
                    <div>
                      <p>تایید</p>
                    </div>
                  ) : (
                    <div>
                      <p>تایید</p>
                    </div>
                  )}
                </div>
                <div className={styles.purchase_preparation_container}>
                  <div
                    className={
                      purchase.condition === "D"
                        ? `${styles.purchase_preparation} ${styles.active_condition}`
                        : styles.purchase_preparation
                    }
                  >
                    <p>2</p>
                  </div>
                  <div>
                    <p>آماده سازی جهت ارسال</p>
                  </div>
                </div>
                <div className={styles.purchase_courier_delivery_container}>
                  <div
                    className={
                      purchase.condition === "CD"
                        ? `${styles.purchase_courier_delivery} ${styles.active_condition}`
                        : styles.purchase_courier_delivery
                    }
                  >
                    <p>3</p>
                  </div>
                  <div>
                    <p>تحویل پیک</p>
                  </div>
                </div>
                <div className={styles.purchase_send_container}>
                  <div
                    className={
                      purchase.condition === "S"
                        ? `${styles.styles.purchase_send} ${styles.active_condition}`
                        : styles.purchase_send
                    }
                  >
                    <p>4</p>
                  </div>
                  <div>
                    <p>ارسال</p>
                  </div>
                </div>
                <div className={styles.purchase_condition_line}></div>
              </div>
              <div className={styles.purchase_condition_text}>
                {conditionAlertSvg}
                {purchase.condition === "NC" ? (
                  <p>سفارش شما منتظر تایید است</p>
                ) : purchase.condition === "C" ? (
                  <p>سفارش شما تایید شده است</p>
                ) : purchase.condition === "D" ? (
                  <p>سفارش شما در حال آماده سازی است</p>
                ) : purchase.condition === "CD" ? (
                  <p>سفارش شما تحویل پیک شده است</p>
                ) : purchase.condition === "S" ? (
                  <p>سفارش شما ارسال شده است</p>
                ) : (
                  <p>سفارش شما ارسال شده است</p>
                )}
              </div>
            </div>
            <div
              className={styles.separator}
              style={
                index < purchases.length - 1 ? undefined : { display: "none" }
              }
            ></div>
          </div>
        );
      })}
    </div>
  ) : (
    <div
      style={active ? undefined : { display: "none" }}
      className={styles.current_orders_container}
    >
      <div>
        <p>هیچ سفارش جاری وجود ندارد!</p>
      </div>
    </div>
  );
}

export default CurrentOrders;

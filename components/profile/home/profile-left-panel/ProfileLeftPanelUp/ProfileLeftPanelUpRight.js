import { useState } from "react";
import Image from "next/image";
import Link from "next/link";

import styles from "./ProfileLeftPanelUpRight.module.css";

function ProfileLeftPanelUpRight(props) {
  const [showLoading, setShowLoading] = useState(false);
  const lastPurchases = props.lastPurchases;

  function numberWithCommas(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, "٬");
  }

  return (
    <div className={styles.profile_left_panel_upside_right_container}>
      <div
        className="loading-container"
        style={showLoading ? undefined : { display: "none" }}
      >
        <div className="loading-for-scale">
          <div className="loading-sub-container">
            <div className="row">
              <div className="purple-box"></div>
              <div className="white-box"></div>
            </div>
            <div className="row">
              <div className="white-box"></div>
              <div className="purple-box"></div>
            </div>
          </div>
        </div>
      </div>
      <div className={styles.profile_left_panel_upside_right_title}>
        <p>سفارشات اخیر</p>
        <Link href="/profile/orders">
          <p onClick={() => setShowLoading(true)}>مشاهده همه</p>
        </Link>
      </div>
      <div className={styles.profile_left_panel_upside_right_content}>
        <div
          className={styles.profile_left_panel_upside_right_content_empty_cart}
          style={lastPurchases.length !== 0 ? { display: "none" } : true}
        >
          <div
            className={
              styles.profile_left_panel_upside_right_content_empty_cart_image
            }
          >
            <Image
              alt=""
              layout="responsive"
              width="1"
              height="1"
              src="/images/cart/empty-cart.png"
              draggable={false}
            />
          </div>
          <div
            className={
              styles.profile_left_panel_upside_right_content_empty_cart_texts
            }
          >
            <div></div>
            <p>اولین سفارش خود را ثبت کنید</p>
          </div>
        </div>
        <div className={styles.last_purchases_container}>
          {lastPurchases.map((purchase, index) => {
            return (
              <div key={index} className={styles.products_container}>
                <div className={styles.products_images_container}>
                  {purchase.products.map((product, index) => {
                    return (
                      index < 3 && (
                        <div key={index}>
                          <Image
                            alt=""
                            width="60"
                            height="60"
                            src={product.src}
                          />
                        </div>
                      )
                    );
                  })}
                </div>
                <div className={styles.products_condition}>
                  <svg
                    width="25"
                    height="20"
                    viewBox="0 0 25 20"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M16 2.83332V15.6667H10.1667C10.1667 15.0478 9.92083 14.4543 9.48325 14.0167C9.04566 13.5792 8.45217 13.3333 7.83333 13.3333C7.21449 13.3333 6.621 13.5792 6.18342 14.0167C5.74583 14.4543 5.5 15.0478 5.5 15.6667H3.16667C2.85725 15.6667 2.5605 15.5437 2.34171 15.3249C2.12292 15.1062 2 14.8094 2 14.5V2.83332C2 2.5239 2.12292 2.22716 2.34171 2.00837C2.5605 1.78957 2.85725 1.66666 3.16667 1.66666H14.8333C15.1428 1.66666 15.4395 1.78957 15.6583 2.00837C15.8771 2.22716 16 2.5239 16 2.83332ZM22.8017 8.37499L21.0167 5.69166C20.9099 5.52952 20.7644 5.39659 20.5932 5.30492C20.4221 5.21324 20.2308 5.16572 20.0367 5.16666H16V15.6667H17.1667C17.1667 15.0478 17.4125 14.4543 17.8501 14.0167C18.2877 13.5792 18.8812 13.3333 19.5 13.3333C20.1188 13.3333 20.7123 13.5792 21.1499 14.0167C21.5875 14.4543 21.8333 15.0478 21.8333 15.6667H23V9.01666C22.9982 8.78795 22.9292 8.56481 22.8017 8.37499Z"
                      stroke="#A698CF"
                      strokeWidth="2.15"
                      strokeLinecap="round"
                      strokeLinejoin="round"
                    />
                    <path
                      d="M10.1667 15.6667C10.1667 16.1281 10.0298 16.5793 9.77343 16.963C9.51704 17.3467 9.15262 17.6458 8.72626 17.8224C8.2999 17.999 7.83075 18.0452 7.37812 17.9552C6.9255 17.8651 6.50974 17.6429 6.18342 17.3166C5.8571 16.9902 5.63487 16.5745 5.54484 16.1219C5.4548 15.6692 5.50101 15.2001 5.67762 14.7737C5.85422 14.3474 6.15329 13.9829 6.537 13.7266C6.92072 13.4702 7.37184 13.3333 7.83333 13.3333C8.45217 13.3333 9.04567 13.5792 9.48325 14.0167C9.92083 14.4543 10.1667 15.0478 10.1667 15.6667ZM19.5 13.3333C19.0385 13.3333 18.5874 13.4702 18.2037 13.7266C17.82 13.9829 17.5209 14.3474 17.3443 14.7737C17.1677 15.2001 17.1215 15.6692 17.2115 16.1219C17.3015 16.5745 17.5238 16.9902 17.8501 17.3166C18.1764 17.6429 18.5922 17.8651 19.0448 17.9552C19.4974 18.0452 19.9666 17.999 20.3929 17.8224C20.8193 17.6458 21.1837 17.3467 21.4401 16.963C21.6965 16.5793 21.8333 16.1281 21.8333 15.6667C21.8333 15.0478 21.5875 14.4543 21.1499 14.0167C20.7123 13.5792 20.1188 13.3333 19.5 13.3333Z"
                      stroke="#A698CF"
                      strokeWidth="2.15"
                      strokeLinecap="round"
                      strokeLinejoin="round"
                    />
                  </svg>
                  <p>
                    وضعیت :
                    {purchase.condition === "NC"
                      ? " منتظر تایید"
                      : purchase.condition === "C"
                      ? " تایید شده"
                      : purchase.condition === "D"
                      ? " آماده سازی جهت ارسال"
                      : purchase.condition === "S"
                      ? " تحویل پیک"
                      : purchase.condition === "CD"
                      ? " تحویل شده"
                      : undefined}
                  </p>
                </div>
                <div className={styles.products_price}>
                  <svg
                    width="24"
                    height="23"
                    viewBox="0 0 24 23"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fillRule="evenodd"
                      clipRule="evenodd"
                      d="M16.2275 14.9501C16.2275 13.9974 16.9998 13.2251 17.9525 13.2251H18.0675C19.0202 13.2251 19.7925 13.9974 19.7925 14.9501C19.7925 15.9028 19.0202 16.6751 18.0675 16.6751H17.9525C16.9998 16.6751 16.2275 15.9028 16.2275 14.9501Z"
                      fill="#A698CF"
                    />
                    <path
                      fillRule="evenodd"
                      clipRule="evenodd"
                      d="M13.721 0.489563C14.0856 -0.0300856 14.8024 -0.156001 15.3223 0.208252L20.9688 4.16425C21.4886 4.52845 21.6151 5.24492 21.2514 5.76508L19.1929 8.70908C18.9777 9.0168 18.6259 9.2001 18.2504 9.2001H4.0709C3.64186 9.2001 3.2485 8.96127 3.05058 8.58061C2.85266 8.19995 2.88309 7.74077 3.12952 7.38956L7.97102 0.489563C8.3358 -0.0303029 9.05292 -0.156071 9.57283 0.208642L12.4848 2.25138L13.721 0.489563ZM11.1631 4.13368L9.19332 2.7519L6.28267 6.9001H9.22282L11.1631 4.13368ZM12.0327 6.9001L14.9437 2.75134L18.7081 5.38869L17.6513 6.9001H12.0327Z"
                      fill="#A698CF"
                    />
                    <path
                      fillRule="evenodd"
                      clipRule="evenodd"
                      d="M0.759766 9.2001C0.759766 7.92985 1.78951 6.9001 3.05977 6.9001H21.4598C22.73 6.9001 23.7598 7.92985 23.7598 9.2001V20.7001C23.7598 21.9704 22.73 23.0001 21.4598 23.0001H3.05977C1.78951 23.0001 0.759766 21.9704 0.759766 20.7001V9.2001ZM21.4598 9.2001H3.05977V20.7001H21.4598V9.2001Z"
                      fill="#A698CF"
                    />
                  </svg>
                  <p>قیمت کل : {numberWithCommas(purchase.finalPrice)}</p>
                  <svg
                    width="19"
                    height="18"
                    viewBox="0 0 19 18"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M9.92401 16.2756C10.2005 16.2756 10.4458 16.2652 10.6601 16.2443C10.8778 16.227 11.0696 16.1992 11.2355 16.161C11.4048 16.1263 11.5517 16.0794 11.6761 16.0204C11.804 15.9649 11.9145 15.8972 12.0078 15.8174C12.153 15.6993 12.2618 15.5622 12.3344 15.406C12.4104 15.2498 12.4554 15.0398 12.4692 14.776H11.6709C11.4981 14.776 11.3219 14.7621 11.1422 14.7343C10.9625 14.7065 10.7897 14.6597 10.6238 14.5937C10.4579 14.5243 10.3007 14.4358 10.1521 14.3282C10.007 14.2205 9.87909 14.0886 9.7685 13.9324C9.66138 13.7727 9.57498 13.5853 9.50932 13.3701C9.44712 13.1549 9.41602 12.9084 9.41602 12.6307C9.41602 12.3912 9.43675 12.1794 9.47822 11.9954C9.51969 11.808 9.57153 11.6431 9.63373 11.5008C9.69939 11.3584 9.77196 11.2352 9.85144 11.1311C9.93093 11.0235 10.007 10.9297 10.0795 10.8499C10.2869 10.6416 10.5219 10.4819 10.7845 10.3708C11.0471 10.2563 11.3305 10.199 11.6346 10.199C12.0113 10.199 12.3327 10.265 12.5988 10.3969C12.8683 10.5253 13.0878 10.7041 13.2571 10.9332C13.4299 11.1623 13.556 11.4348 13.6355 11.7507C13.715 12.0631 13.7547 12.4033 13.7547 12.7713V13.4794H14.636V14.776H13.7496C13.7357 15.2515 13.6511 15.6525 13.4956 15.9788C13.3435 16.3051 13.1154 16.5897 12.8113 16.8327C12.6523 16.9577 12.4796 17.0653 12.2929 17.1556C12.1063 17.2493 11.8973 17.3274 11.6657 17.3899C11.4342 17.4524 11.175 17.4975 10.8882 17.5252C10.6048 17.5565 10.2834 17.5721 9.92401 17.5721V16.2756ZM11.6346 11.4956C11.3409 11.4956 11.1076 11.5875 10.9348 11.7715C10.762 11.9555 10.6756 12.2419 10.6756 12.6307C10.6756 12.7834 10.705 12.9136 10.7638 13.0212C10.826 13.1288 10.9037 13.2173 10.997 13.2868C11.0938 13.3527 11.2009 13.4013 11.3184 13.4326C11.4359 13.4638 11.5534 13.4794 11.6709 13.4794H12.4692V12.7713C12.4692 12.5734 12.4536 12.405 12.4225 12.2662C12.3914 12.1239 12.35 12.0058 12.2981 11.9121C12.2498 11.8184 12.1927 11.7438 12.1271 11.6882C12.0649 11.6327 12.0027 11.591 11.9405 11.5632C11.8817 11.5355 11.8247 11.5181 11.7694 11.5112C11.7141 11.5008 11.6692 11.4956 11.6346 11.4956Z"
                      fill="#4B416A"
                    />
                    <path
                      d="M18.2334 10.4021C18.2403 10.4264 18.2542 10.4837 18.2749 10.5739C18.2991 10.6642 18.325 10.7753 18.3526 10.9072C18.3803 11.0356 18.4079 11.1797 18.4356 11.3393C18.4667 11.499 18.4943 11.6604 18.5185 11.8236C18.5462 11.9833 18.5669 12.1395 18.5807 12.2922C18.598 12.445 18.6066 12.5786 18.6066 12.6932C18.6066 13.0507 18.5479 13.3614 18.4304 13.6252C18.3129 13.8856 18.1591 14.1008 17.9691 14.2709C17.779 14.441 17.5647 14.5677 17.3263 14.651C17.0913 14.7343 16.8546 14.776 16.6161 14.776H14.382V13.4794H16.6524C16.6939 13.4794 16.7526 13.4742 16.8287 13.4638C16.9081 13.4499 16.9859 13.4169 17.0619 13.3649C17.1414 13.3128 17.2105 13.2347 17.2693 13.1305C17.328 13.0229 17.3574 12.8771 17.3574 12.6932C17.3574 12.6168 17.3505 12.5248 17.3366 12.4172C17.3263 12.3061 17.3107 12.1881 17.29 12.0631C17.2693 11.9381 17.2451 11.8114 17.2174 11.683C17.1932 11.5511 17.169 11.4279 17.1449 11.3133C17.1207 11.1953 17.0965 11.0894 17.0723 10.9957C17.0481 10.8985 17.0291 10.8239 17.0153 10.7718L18.2334 10.4021ZM17.7462 9.38672L16.8753 8.50154L17.7358 7.60593L18.6274 8.50154L17.7462 9.38672ZM15.5742 9.39193L14.7034 8.50674L15.5587 7.61114L16.4502 8.50674L15.5742 9.39193Z"
                      fill="#4B416A"
                    />
                    <path
                      d="M2.51926 14.776C2.13912 14.776 1.81255 14.7517 1.53955 14.7031C1.26654 14.658 1.03673 14.5903 0.85012 14.5C0.663509 14.4063 0.513182 14.2883 0.399142 14.146C0.288557 14.0036 0.203891 13.837 0.145142 13.6461C0.0863942 13.4552 0.0466529 13.2399 0.0259183 13.0004C0.00863943 12.7574 0 12.4901 0 12.1985V7.26752H1.29073V12.1985C1.29073 12.4762 1.29937 12.6984 1.31665 12.865C1.33738 13.0317 1.38749 13.1618 1.46698 13.2556C1.54991 13.3458 1.67259 13.4066 1.83502 13.4378C2.00089 13.4656 2.22897 13.4795 2.51926 13.4795V14.776Z"
                      fill="#4B416A"
                    />
                    <path
                      d="M6.15807 13.7919C6.18917 13.7919 6.23755 13.7867 6.30321 13.7763C6.37233 13.7624 6.44144 13.7242 6.51056 13.6617C6.57967 13.5992 6.64015 13.5038 6.69199 13.3753C6.74728 13.2434 6.77492 13.0594 6.77492 12.8234C6.77492 12.7331 6.75764 12.6186 6.72309 12.4797C6.69199 12.3374 6.63497 12.2003 6.55203 12.0684C6.47254 11.933 6.36369 11.8184 6.22546 11.7247C6.09068 11.6275 5.91962 11.5789 5.71227 11.5789C5.53257 11.5789 5.3857 11.6327 5.27166 11.7403C5.15762 11.8479 5.06086 11.9816 4.98138 12.1413C4.90535 12.3009 4.83969 12.4745 4.7844 12.662C4.73256 12.8459 4.67554 13.0143 4.61334 13.167C4.7412 13.2399 4.87598 13.3146 5.01766 13.3909C5.16281 13.4638 5.30449 13.5298 5.44272 13.5888C5.58095 13.6478 5.71055 13.6964 5.8315 13.7346C5.95591 13.7728 6.06476 13.7919 6.15807 13.7919ZM5.71227 10.2876C6.07513 10.2876 6.39133 10.3553 6.66088 10.4907C6.93389 10.626 7.15851 10.8083 7.33476 11.0374C7.51446 11.263 7.64751 11.5251 7.7339 11.8236C7.82375 12.1222 7.86868 12.4346 7.86868 12.7609C7.86868 13.1219 7.83757 13.4291 7.77537 13.6825C7.71317 13.9359 7.63023 14.146 7.52656 14.3126C7.42634 14.4792 7.31057 14.6094 7.17925 14.7031C7.05139 14.8003 6.92179 14.8715 6.79047 14.9166C6.66261 14.9652 6.5382 14.9947 6.41725 15.0051C6.2963 15.019 6.19263 15.0259 6.10623 15.0259C5.93344 15.0259 5.76929 15.0086 5.61378 14.9739C5.45827 14.9426 5.29931 14.8958 5.13689 14.8333C4.97792 14.7743 4.81204 14.7014 4.63926 14.6146C4.46647 14.5243 4.27813 14.4237 4.07424 14.3126C3.91873 14.4792 3.75112 14.599 3.57142 14.6719C3.39518 14.7413 3.18783 14.776 2.94938 14.776H2.31179L2.30142 13.4795H2.94938C3.02541 13.4795 3.09107 13.4569 3.14636 13.4118C3.20511 13.3666 3.25695 13.3042 3.30187 13.2243C3.35025 13.141 3.39345 13.0421 3.43146 12.9275C3.47293 12.8095 3.5144 12.6793 3.55587 12.537C3.62499 12.2871 3.70792 12.0302 3.80469 11.7664C3.90145 11.4991 4.02931 11.2561 4.18828 11.0374C4.3507 10.8187 4.55459 10.6399 4.79995 10.5011C5.04531 10.3587 5.34942 10.2876 5.71227 10.2876Z"
                      fill="#4B416A"
                    />
                    <path
                      d="M6.84788 7.75841C6.57142 7.75841 6.30532 7.72544 6.0496 7.65948C5.79387 7.59353 5.55197 7.4998 5.32388 7.3783C5.09926 7.25681 4.89019 7.10754 4.69666 6.9305C4.50659 6.75347 4.34072 6.55386 4.19903 6.3317C4.03315 6.06094 3.90529 5.75893 3.81544 5.42568C3.72559 5.09591 3.68066 4.75051 3.68066 4.38949C3.68066 4.16038 3.69449 3.93822 3.72213 3.723C3.74978 3.50778 3.79298 3.28735 3.85172 3.06171C3.91393 2.83607 3.99341 2.60002 4.09017 2.35356C4.19039 2.1071 4.31134 1.83633 4.45303 1.54127L5.61935 2.09842C5.49495 2.35182 5.39127 2.5792 5.30833 2.78053C5.2254 2.98187 5.15801 3.17279 5.10617 3.3533C5.05433 3.53034 5.01632 3.70217 4.99213 3.86879C4.9714 4.03195 4.96103 4.20378 4.96103 4.38428C4.96103 4.62034 4.9904 4.84597 5.04915 5.06119C5.1079 5.27989 5.18911 5.47602 5.29278 5.64958C5.45866 5.89605 5.67637 6.09218 5.94592 6.23797C6.21893 6.38724 6.51958 6.46187 6.84788 6.46187H7.90016C8.26648 6.46187 8.56367 6.42369 8.79175 6.34732C9.02329 6.27095 9.20299 6.1616 9.33085 6.01928C9.45872 5.88043 9.54511 5.71207 9.59004 5.5142C9.63842 5.31634 9.66261 5.09764 9.66261 4.85812V1.35382H10.9533V4.85812C10.9533 5.82662 10.6976 6.55213 10.1862 7.03464C9.67816 7.51716 8.91616 7.75841 7.90016 7.75841H6.84788ZM6.74421 0.947671L7.67727 0L8.63106 0.958085L7.68763 1.90576L6.74421 0.947671Z"
                      fill="#4B416A"
                    />
                  </svg>
                </div>
              </div>
            );
          })}
        </div>
      </div>
    </div>
  );
}

export default ProfileLeftPanelUpRight;
